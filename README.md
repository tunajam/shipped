# Shipped üöÄ

> Ship code. Changelog writes itself.

A GitHub Action that automatically generates beautiful, human-readable changelogs from your merged pull requests using AI.

## Features

- **Automatic entries** ‚Äî Generates a changelog entry when PRs merge
- **AI-powered** ‚Äî Transforms technical PR details into user-friendly updates
- **Contributor highlights** ‚Äî Credits authors and reviewers
- **Weekly digests** ‚Äî Summarizes the week's work into a narrative
- **Zero config** ‚Äî Works out of the box with sensible defaults

## Quick Start

Create `.github/workflows/changelog.yml`:

```yaml
name: Changelog

on:
  pull_request:
    types: [closed]
    branches: [main]
  schedule:
    - cron: '0 18 * * 0'  # Weekly digest on Sundays
  workflow_dispatch:
    inputs:
      mode:
        description: 'Mode'
        required: true
        default: 'weekly'
        type: choice
        options: [entry, weekly]

permissions:
  contents: write
  pull-requests: read

jobs:
  changelog-entry:
    if: github.event_name == 'pull_request' && github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Generate changelog entry
        uses: tunajam/shipped@v1
        with:
          mode: entry
          api-key: ${{ secrets.OPENAI_API_KEY }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Commit changes
        run: |
          git config user.name "Shipped Bot"
          git config user.email "shipped@users.noreply.github.com"
          git add CHANGELOG.md
          git diff --staged --quiet || git commit -m "docs: changelog for #${{ github.event.pull_request.number }}"
          git push

  weekly-digest:
    if: github.event_name == 'schedule' || (github.event_name == 'workflow_dispatch' && github.event.inputs.mode == 'weekly')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Generate weekly digest
        uses: tunajam/shipped@v1
        with:
          mode: weekly
          api-key: ${{ secrets.OPENAI_API_KEY }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Commit changes
        run: |
          git config user.name "Shipped Bot"
          git config user.email "shipped@users.noreply.github.com"
          git add WEEKLY.md
          git diff --staged --quiet || git commit -m "docs: weekly digest $(date +%Y-%m-%d)"
          git push
```

## Setup

1. Add `OPENAI_API_KEY` to your repository secrets
2. Create the workflow file above
3. Merge a PR and watch the magic happen ‚ú®

## Inputs

| Input | Description | Default |
|-------|-------------|---------|
| `mode` | `entry` (per-PR) or `weekly` (digest) | `entry` |
| `api-key` | API key (OpenAI, OpenRouter, or compatible) | Required |
| `provider` | `openai`, `openrouter`, or custom base URL | `openai` |
| `model` | Model to use | `gpt-4o-mini` |
| `changelog-path` | Path to CHANGELOG.md | `CHANGELOG.md` |
| `weekly-path` | Path to WEEKLY.md | `WEEKLY.md` |
| `include-labels` | Only include PRs with these labels | `` (all) |
| `exclude-labels` | Skip PRs with these labels | `skip-changelog,no-changelog` |

## Provider Examples

### OpenAI (default)
```yaml
with:
  api-key: ${{ secrets.OPENAI_API_KEY }}
  provider: openai
  model: gpt-4o-mini
```

### OpenRouter
```yaml
with:
  api-key: ${{ secrets.OPENROUTER_API_KEY }}
  provider: openrouter
  model: anthropic/claude-3-haiku  # or any model on OpenRouter
```

### Custom Provider (OpenAI-compatible)
```yaml
with:
  api-key: ${{ secrets.CUSTOM_API_KEY }}
  provider: https://your-api.com/v1
  model: your-model-name
```

## Output Format

### CHANGELOG.md

```markdown
# Changelog

All notable changes to this project.

---

## 2026-01-26

### üöÄ Dark mode is here

We've added dark mode support across the entire application. Toggle between 
light and dark themes in Settings ‚Üí Appearance, or let it follow your 
system preference automatically.

**Shipped by** @hsbacot ‚Ä¢ **Reviewed by** @contributor

---
```

### WEEKLY.md

```markdown
# Week of January 20-26, 2026

## What We Shipped

This week was all about polish and performance...

### Highlights

üöÄ **Dark mode** ‚Äî The #1 requested feature is here  
üêõ **Performance fixes** ‚Äî 40% faster page loads

### Contributors

Big thanks to everyone who shipped this week:
- **@hsbacot** ‚Äî Dark mode, performance
- **@contributor** ‚Äî Code review

---

*Generated by Shipped*
```

## Filtering PRs

### Only include specific PRs

```yaml
with:
  include-labels: 'changelog,release'
```

### Exclude PRs

```yaml
with:
  exclude-labels: 'skip-changelog,dependencies,chore'
```

## License

MIT ¬© [tunajam](https://tunajam.com)
